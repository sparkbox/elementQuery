/*! elementQuery | Author: Tyson Matanich (http://matanich.com), 2013 | License: MIT */
/* Modified by Sparkbox, 2014 */
!function(a,b,c){"use strict";var d=a.Sizzle||jQuery.find,e={},f=null,g=function(){b.styleSheets[0]&&(f=b.styleSheets[0].cssRules!==c?"cssRules":"rules")},h=function(a,b,f,g,h){if(a=l(a),""!=a){var i;g||h||(i=/^([0-9]*.?[0-9]+)(px|em)$/.exec(f),null!=i&&(g=Number(i[1]),"NaN"!=g+""&&(h=i[2]))),h&&(d.compile&&d.compile(a),e[a]===c&&(e[a]={}),e[a][b]===c&&(e[a][b]={}),e[a][b][f]=[g,h])}},i=function(a,b){var c,d,e;for(c in a)for(d in a[c])if("string"==typeof a[c][d])h(c,d,a[c][d]);else if("object"==typeof a[c][d])for(e=0;e<a[c][d].length;e++)h(c,d,a[c][d][e]);1==b&&r()},j=function(a){if(a){var e,f,g,i,j,k,l,m,b=/(\[(min\-width|max\-width|min\-height|max\-height)\~\=(\'|\")([0-9]*.?[0-9]+)(px|em)(\'|\")\])(\[(min\-width|max\-width|min\-height|max\-height)\~\=(\'|\")([0-9]*.?[0-9]+)(px|em)(\'|\")\])?/gi,d=a.split(",");for(e=0;e<d.length;e++)for(f=null,j=0,k=0;0==k||null!=g;)g=b.exec(d[e]),null!=g&&(i=Number(g[4]),"NaN"!=i+""&&(null==f&&(f=d[e].substring(j,g.index),l=d[e].substring(g.index+g[1].length),l.length>0&&(m=l.indexOf(" "),0!=m&&(m>0&&(l=l.substring(0,m)),l=l.replace(/(\[(min\-width|max\-width|min\-height|max\-height)\~\=(\'|\")([0-9]*.?[0-9]+)(px|em)(\'|\")\])/gi,""),f+=l))),h(f,g[2],g[4]+g[5],i,g[5])),g[7]===c||""==g[7]?(j=g.index+g[1].length,f=null):b.lastIndex=g.index+g[1].length),k++}},k=function(a,b){if(null==f&&g(),a[f]&&a[f].length>0){var c=a.ownerNode||a.owningElement;if(b||null===c.getAttribute("data-elementquery-bypass")&&null===c.getAttribute("data-elementquery-processed")){var d,e,h;for(d=0;d<a[f].length;d++)if(h=a[f][d],h[f]&&h[f].length>0)for(e=0;e<h[f].length;e++)j(h[f][e].selectorText);else j(h.selectorText);c.setAttribute("data-elementquery-processed","")}}},l=function(a){if(null==a)return"";var b="".trim;return b&&!b.call("\ufeff\xa0")?b.call(a):(a+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},m=function(a,b){var c=a.getAttribute(b);return c?(" "+c+" ").replace(/[\t\r\n]/g," "):" "},n=function(a,b,c){if(1===a.nodeType){var d=l(c);if(""!=d){var e=m(a,b);e.indexOf(" "+d+" ")<0&&a.setAttribute(b,l(e+d))}}},o=function(a,b,c){if(1===a.nodeType){var d=l(c);if(""!=d){for(var e=m(a,b),f=!1;e.indexOf(" "+d+" ")>=0;)e=e.replace(" "+d+" "," "),f=!0;f&&a.setAttribute(b,l(e))}}},p=function(){var a;for(a=0;a<b.styleSheets.length;a++)k(b.styleSheets[a]);r()},q=function(a,b){var c=null;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}},r=function(){var c,f,g,h,i,j,k,l,m,p,q,r;for(c in e)if(i=d(c+":not([data-eq-use])"),i.length>0)for(f=0;f<i.length;f++){j=i[f],l=j.offsetWidth,m=j.offsetHeight;for(g in e[c])for(h in e[c][g]){k=e[c][g][h][0],"em"==e[c][g][h][1]&&(k*=a.getEmPixels?getEmPixels(j):16);var q=j.getAttribute("data-eq-save");if("min-width"==g&&l>=k||"max-width"==g&&k>=l||"min-height"==g&&m>=k||"max-height"==g&&k>=m){if(n(j,g,h),q){r=d("[data-eq-use="+q+"]");for(p in r)n(r[p],g,h)}}else if(o(j,g,h),q){r=d("[data-eq-use="+q+"]");for(p in r)o(r[p],g,h)}}}if(!a.addEventListener&&a.attachEvent){var s=b.documentElement.className;b.documentElement.className=" "+s,b.documentElement.className=s}};a.elementQuery=function(a,b){a&&"object"==typeof a?a.cssRules||a.rules?(k(a,!0),1==b&&r()):i(a,b):a||b||r()},a.elementQuery.selectors=function(){var b,d,f,a={};for(b in e)for(d in e[b])for(f in e[b][d])a[b]===c&&(a[b]={}),a[b][d]===c&&(a[b][d]=[]),a[b][d][a[b][d].length]=f;return a},a.elementQuery.start=function(b){a.addEventListener&&(a.addEventListener("resize",q(function(){r()},b.debounceTime),!1),a.addEventListener("DOMContentLoaded",p,!1),a.addEventListener("load",p,!1)),b.resizeIE8?a.attachEvent&&a.attachEvent("onload",p):a.attachEvent&&(a.attachEvent("onresize",q(function(){r()},b.debounceTime)),a.attachEvent("onload",p))}}(this,document,void 0),function(a,b){"use strict";var c="!important;",d="position:absolute"+c+"visibility:hidden"+c+"width:1em"+c+"font-size:1em"+c+"padding:0"+c;window.getEmPixels=function(e){var f;e||(e=f=a.createElement("body"),f.style.cssText="font-size:1em"+c,b.insertBefore(f,a.body));var g=a.createElement("i");g.style.cssText=d,e.appendChild(g);var h=g.clientWidth;return f?b.removeChild(f):e.removeChild(g),h}}(document,document.documentElement);